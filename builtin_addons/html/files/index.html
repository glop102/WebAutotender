<!DOCTYPE html>
<html lang="en">
    <head>
        <title>WebAutotender</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="/js/htmx.1.9.12.min.js"></script>
        <script src="/js/script.js"></script>
        <link rel="stylesheet" href="/styles/common.css">
    </head>
    <body>
        <!-- <p hx-post="/htmx">Click Me</p> -->
        <header>
            <h1>Workflow Management</h1>
            <button onclick="refresh_total_page()">Refresh</button>
            <div id="summary_status"></div>
        </header>
        <main>
            <h2>Workflows</h2>
            <section id="workflow_list"></section>
            <h2>Orphan Instances</h2>
            <section id="orphan_instance_list"></section>
        </main>
        <footer>
            <a href="https://github.com/glop102/WebAutotender">github</a>
        </footer>

        <template id="template_workflow_details">
            <div class="workflow_details">
                <div class="workflow_details_name"></div>
                <button type="button" class="workflow_details_state" onclick="workflow_toggle_state(this)"></button>
                <button class="collapse_button" onclick="collapsed_section_toggle(this)">Details</button>
                <p class="workflow_details_user_notes"></p>
                <div class="collapsable">
                    <div class="workflow_details_section_title">Constants:</div>
                    <div class="workflow_details_constants"></div>
                    <div class="workflow_details_section_title">SetupVariables:</div>
                    <div class="workflow_details_setup_variables"></div>
                    <div class="workflow_details_section_title">Procedures:</div>
                    <div class="workflow_details_procedures"></div>
                </div>
                <div class="workflow_details_instances"></div>
            </div>
        </template>

        <template id="template_procedure_details">
            <div class="procedure_details">
                <div class="procedure_details_name"></div>
                <div class="procedure_details_commands"></div>
            </div>
        </template>

        <template id="template_command_details">
            <div class="command_details">
                <div class="command_details_name"></div>
                <div class="command_details_variables"></div>
            </div>
        </template>

        <template id="template_instance_details">
            <div class="instance_details">
                <button type="button" class="collapse_button instance_details_section_title" onclick="collapsed_section_toggle(this)">Instance:</button>
                <button type="button" class="instance_details_state" onclick="instance_toggle_state(this)"></button>
                <div class="instance_details_uuid" style="display: none;"></div>
                <div class="instance_details_workflow_name" style="display: none;"></div>
                <div class="instance_details_next_processing_time"></div>
                <div class="instance_details_console_log" style="display: none;"></div>
                <div class="collapsable">
                    <div class="instance_details_process_name"></div>
                    <div class="instance_details_process_step"></div>
                    <div class="instance_details_console_log_display"></div>
                    <div class="instance_details_variables"></div>
                </div>
            </div>
        </template>

        <template id="template_variable_details">
            <div class="variable_details">
                <div class="variable_details_name"></div>
                <div class="variable_details_typename"></div>
                <div class="variable_details_value"></div>
            </div>
        </template>
    </body>
</html>